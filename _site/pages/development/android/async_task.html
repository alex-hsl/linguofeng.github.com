<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<title>Android 异步任务 - 林国锋的代码库</title>
		<meta name="keywords" content="java" />
		<meta name="description" content="这里是林国锋的开发代码库，用来收集工作学习中常用的代码。" />
		<!-- link href='http://fonts.googleapis.com/css?family=Mate+SC' rel='stylesheet' type='text/css' -->
		<link rel="stylesheet" type="text/css" href="/assets/style.css" />
		<!-- link rel="stylesheet" type="text/css" href="/assets/syntax-default.css" / -->
		<link rel="stylesheet" type="text/css" href="/assets/ui.totop.css" />
		<script type="text/javascript" src="/assets/jquery.min.js"></script>
		<script type="text/javascript" src="/assets/waypoints.min.js"></script>
		<script type="text/javascript" src="/assets/jquery.ui.totop.js"></script>
		<script type="text/javascript" src="/assets/common.js"></script>
		
		<!-- SyntaxHighlighter -->
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shCore.css"/>
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shThemeDefault.css"/>
		<script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shCore.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushJava.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushXml.js"></script>
	    <script type="text/javascript">
	        SyntaxHighlighter.config.clipboardSwf = 'http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/clipboard.swf';
	        SyntaxHighlighter.all();
	    </script>
	    <style type="text/css">
		    .syntaxhighlighter {
			    width: 750px !important;
			    overflow: hidden !important;
			    margin-left: 40px !important;
			}
	    </style>
	</head>

	<body>
		<div id="container">
		
			<div id="sidebar">
				<div id="menu-nav">
					<div id="logo"><a href="/">Library</a></div>
					
					<ul>
						<li>Development
							<ul>
								<li><a href="/pages/development/android.html">Android</a></li>
								<li><a href="/pages/development/java.html">Java</a></li>
								<li><a href="/pages/development/javascript.html">JavaScript</a></li>
								<li><a href="/pages/development/jquery.html">jQuery</a></li>
							</ul>
						</li>
						
					</ul>
					
					<ul>
						<li>Links
							<ul>
								<li><a href="http://www.linguofeng.com">Blog</a></li>
							</ul>
						</li>
					</ul>
					
					<ul class="misc">
						<li>Powered by <a href="http://pages.github.com/">github-pages</a></li>
					</ul>
				</div>
			</div>
			
			<div id="content">
				<h1>Android 异步任务</h1>
<p id="1"><strong>AsyncTask 异步任务</strong></p>
<pre>
===================================================================================================
= 创建
===================================================================================================
private class DownloadFilesTask extends AsyncTask&lt;URL, Integer, Long&gt; {
    // 后台任务（子线程）
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i &lt; count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
        }
        return totalSize;
    }
    
    // 更新进度（主线程）
    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[ ]);
    }
    
    // 完成（主线程）
    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
 }
</pre>

<pre>
===================================================================================================
= 使用 
===================================================================================================
new DownloadFilesTask().execute(url1, url2, url3);
</pre>
<p>更多参数访问 <a href="http://developer.android.com/reference/android/os/AsyncTask.html">http://developer.android.com/reference/android/os/AsyncTask.html</a></p>
			</div>
			
		</div>
	</body>
</html>