<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<title>Android 菜单 - 林国锋的代码库</title>
		<meta name="keywords" content="java" />
		<meta name="description" content="这里是林国锋的开发代码库，用来收集工作学习中常用的代码。" />
		<!-- link href='http://fonts.googleapis.com/css?family=Mate+SC' rel='stylesheet' type='text/css' -->
		<link rel="stylesheet" type="text/css" href="/assets/style.css" />
		<!-- link rel="stylesheet" type="text/css" href="/assets/syntax-default.css" / -->
		<link rel="stylesheet" type="text/css" href="/assets/ui.totop.css" />
		<script type="text/javascript" src="/assets/jquery.min.js"></script>
		<script type="text/javascript" src="/assets/waypoints.min.js"></script>
		<script type="text/javascript" src="/assets/jquery.ui.totop.js"></script>
		<script type="text/javascript" src="/assets/common.js"></script>
		
		<!-- SyntaxHighlighter -->
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shCore.css"/>
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shThemeDefault.css"/>
		<script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shCore.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushJava.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushXml.js"></script>
	    <script type="text/javascript">
	        SyntaxHighlighter.config.clipboardSwf = 'http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/clipboard.swf';
	        SyntaxHighlighter.all();
	    </script>
	    <style type="text/css">
		    .syntaxhighlighter {
			    width: 750px !important;
			    overflow: hidden !important;
			    margin-left: 40px !important;
			}
	    </style>
	</head>

	<body>
		<div id="container">
		
			<div id="sidebar">
				<div id="menu-nav">
					<div id="logo"><a href="/">Library</a></div>
					
					<ul>
						<li>Development
							<ul>
								<li><a href="/pages/development/android.html">Android</a></li>
								<li><a href="/pages/development/java.html">Java</a></li>
								<li><a href="/pages/development/javascript.html">JavaScript</a></li>
								<li><a href="/pages/development/jquery.html">jQuery</a></li>
							</ul>
						</li>
						
					</ul>
					
					<ul>
						<li>Links
							<ul>
								<li><a href="http://www.linguofeng.com">Blog</a></li>
							</ul>
						</li>
					</ul>
					
					<ul class="misc">
						<li>Powered by <a href="http://pages.github.com/">github-pages</a></li>
					</ul>
				</div>
			</div>
			
			<div id="content">
				<div id="charpter">
<h3>Android 菜单</h3>
<ul>
	<li><a href="#1">Option Menu</a></li>
	<li><a href="#2">Context Menu</a></li>
	<li><a href="#3">Sub Menu</a><br />
</div></li>
</ul>
<h1>Android 菜单</h1>
<p>Android中菜单分三种：</p>
<ul>
	<li><a href="#1">选项菜单</a> （Option Menu）</li>
	<li><a href="#2">上下文菜单</a> （Context Menu）</li>
	<li><a href="#3">子菜单</a> （Sub Menu）</li>
</ul>
<p id="1"><strong>一、Option Menu</strong></p>
<p>1、重写Activity.onCreateOptionsMenu(Menu menu)方法创建菜单：</p>
<pre>
/**
 * 添加创建菜单
 */
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // 方法一:通过代码生成
    /**
     * 参数1:菜单组编号&lt;br&gt;
     * 参数2:菜单编号(下标)&lt;br&gt;
     * 参数3:菜单排序&lt;br&gt;
     * 参数4:菜单名&lt;br&gt;
     */
    menu.add(GROUP_ID, Menu.NONE, ORDER, "新增").setIcon(android.R.drawable.ic_menu_add);// 设置图标
    menu.add(GROUP_ID, Menu.NONE + 1, ORDER + 1, "修改");
    menu.add(GROUP_ID, Menu.NONE + 2, ORDER + 2, R.string.query);
    menu.add(GROUP_ID, Menu.NONE + 3, ORDER + 3, R.string.del).setCheckable(true); // 增加一个√选项
    /*
     * 包含子菜单的
     */
    SubMenu sub1 = menu.addSubMenu("父菜单");
    sub1.setIcon(android.R.drawable.ic_menu_always_landscape_portrait);// 设置按钮图标
    sub1.setHeaderIcon(android.R.drawable.ic_menu_agenda);// 子菜单标题图标
    sub1.add(GROUP_ID, 11, 0, "菜单1");
    sub1.add(GROUP_ID, 12, 1, "菜单2");
    // 参数一:
    // 参数二:是否显示单选框
    // 参数三:
    sub1.setGroupCheckable(1, false, true);

    // 方法二:直接通过xml文件生成
    MenuInflater menuInflater = new MenuInflater(getApplicationContext());
    menuInflater.inflate(R.menu.menu_list, menu);
    /*
     * &lt;?xml version="1.0" encoding="utf-8"?&gt;
     * &lt;menu xmlns:android="http://schemas.android.com/apk/res/android"&gt;
     *      &lt;item android:id="@+id/item1" 
     *			  android:icon="@android:drawable/ic_menu_add" 
     *			  android:title="新增" /&gt;
     *      &lt;item android:id="@+id/item1" 
     *			  android:icon="@android:drawable/ic_menu_add" 
     *			  android:title="其它"&gt;
     *          &lt;menu&gt;
     *              &lt;item android:id="@+id/item2" 
     *			  android:icon="@android:drawable/ic_menu_add" 
     *			  android:title="新增2" /&gt;
     *          &lt;/menu&gt;
     *      &lt;/item&gt;
     * &lt;/menu&gt;
     */
    return super.onCreateOptionsMenu(menu);
}
</pre>
<p>2、重写Activity.onOptionsItemSelected(MenuItem item)方法创建菜单点击事件</p>
<pre>
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case Menu.NONE:
        Toast.makeText(getApplicationContext(), item.getTitle(), Toast.LENGTH_SHORT).show();
        break;
    case Menu.NONE + 1:
        Toast.makeText(getApplicationContext(), item.getTitle(), Toast.LENGTH_SHORT).show();
        break;
    case Menu.NONE + 2:
        Toast.makeText(getApplicationContext(), item.getTitle(), Toast.LENGTH_SHORT).show();
        break;
    case Menu.NONE + 3:
        Toast.makeText(getApplicationContext(), item.getTitle(), Toast.LENGTH_SHORT).show();
        break;
    }
    Toast.makeText(getApplicationContext(), item.getTitle(), Toast.LENGTH_SHORT).show();
    return super.onOptionsItemSelected(item);
}
</pre>
<p id="2"><strong>二、Context Menu</strong></p>
<p>1、重写Activity.onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo)方法创建上下文菜单：</p>
<pre>
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
	super.onCreateContextMenu(menu, v, menuInfo);
	// 代码与选项菜单的一样
}
</pre>
<p>2、重写Activity.onContextItemSelected(MenuItem item)方法创建上下文菜单点击事件：</p>
<pre>
@Override
public boolean onContextItemSelected(MenuItem item) {
	// 代码与选项菜单一样
	return super.onContextItemSelected(item);
}
</pre>
<p>3、重要的一步：</p>
<pre>
// 给某个控件注册上下文菜单，只有注册才有效
registerForContextMenu(View);
</pre>
<p id="3"><strong>三、Sub Menu</strong></p>
<p>1、重写Activity.onCreateOptionsMenu(Menu menu)方法创建菜单：</p>
<pre>
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    SubMenu sub1 = menu.addSubMenu("父菜单");
    sub1.setIcon(android.R.drawable.ic_menu_always_landscape_portrait);// 设置按钮图标
    sub1.setHeaderIcon(android.R.drawable.ic_menu_agenda);// 子菜单标题图标
    sub1.add(GROUP_ID, 11, 0, "菜单1");
    sub1.add(GROUP_ID, 12, 1, "菜单2");
    // 也可以通过XML加进来，参考选项菜单中的做法
    return super.onCreateOptionsMenu(menu);
}
</pre>
<p>2、重写Activity.onOptionsItemSelected(MenuItem item)方法创建菜单点击事件</p>
<pre>
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // 代码与选项菜单一样
    return super.onOptionsItemSelected(item);
}
</pre>
			</div>
			
		</div>
	</body>
</html>