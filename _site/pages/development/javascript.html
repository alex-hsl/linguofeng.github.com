<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<meta http-equiv="pragma" content="no-cache" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<title>JavaScript - 林国锋的代码库</title>
		<meta name="keywords" content="java" />
		<meta name="description" content="这里是林国锋的开发代码库，用来收集工作学习中常用的代码。" />
		<!-- link href='http://fonts.googleapis.com/css?family=Mate+SC' rel='stylesheet' type='text/css' -->
		<link rel="stylesheet" type="text/css" href="/assets/style.css" />
		<!-- link rel="stylesheet" type="text/css" href="/assets/syntax-default.css" / -->
		<link rel="stylesheet" type="text/css" href="/assets/ui.totop.css" />
		<script type="text/javascript" src="/assets/jquery.min.js"></script>
		<script type="text/javascript" src="/assets/waypoints.min.js"></script>
		<script type="text/javascript" src="/assets/jquery.ui.totop.js"></script>
		<script type="text/javascript" src="/assets/common.js"></script>
		
		<!-- SyntaxHighlighter -->
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shCore.css"/>
	    <link type="text/css" rel="stylesheet" href="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/styles/shThemeDefault.css"/>
		<script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shCore.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushJava.js"></script>
	    <script type="text/javascript" src="http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/shBrushXml.js"></script>
	    <script type="text/javascript">
	        SyntaxHighlighter.config.clipboardSwf = 'http://www.linguofeng.com/wp-content/plugins/syntax-highlighter-and-code-prettifier/scripts/clipboard.swf';
	        SyntaxHighlighter.all();
	    </script>
	    <style type="text/css">
		    .syntaxhighlighter {
			    width: 750px !important;
			    overflow: hidden !important;
			    margin-left: 40px !important;
			}
	    </style>
	</head>

	<body>
		<div id="container">
		
			<div id="sidebar">
				<div id="menu-nav">
					<div id="logo"><a href="/">Library</a></div>
					
					<ul>
						<li>Development
							<ul>
								<li><a href="/pages/development/android.html">Android</a></li>
								<li><a href="/pages/development/java.html">Java</a></li>
								<li><a href="/pages/development/javascript.html">JavaScript</a></li>
								<li><a href="/pages/development/jquery.html">jQuery</a></li>
							</ul>
						</li>
						
					</ul>
					
					<ul>
						<li>Links
							<ul>
								<li><a href="http://www.linguofeng.com">Blog</a></li>
							</ul>
						</li>
					</ul>
					
					<ul class="misc">
						<li>Powered by <a href="http://pages.github.com/">github-pages</a></li>
					</ul>
				</div>
			</div>
			
			<div id="content">
				<div id="charpter">
<h3>JavaScript</h3>
<ul>
	<li><strong><a href="#1">Window对象</a></strong></li>
	<li><strong><a href="#5">Ajax</a></strong></li>
	<li><strong><a href="#6">Json</a></strong></li>
</ul>
</div>
<h1>JavaScript</h1>
<h3 id="1">Window对象</h3>
<ul>
	<li><a href="java.html">document</a> &#8211; 文档对象</li>
	<li>window &#8211; 自身</li>
	<li>self &#8211; 自身</li>
</ul>
<h3 id="2">JavaScript函数定义</h3>
<ul>
	<li><strong id="2_1">普通方式</strong></li>
</ul>
<pre><code>function print(msg){
    document.write(msg);
}
print('abc');</code></pre>
<ul>
	<li><strong id="2_2">函数直接量定义</strong></li>
</ul>
<pre><code>var result = function(a,b){
    return a+b;
}
var sum = result(7,8);</code></pre>
<ul>
	<li><strong id="2_3">构造函数方法</strong></li>
</ul>
<pre><code>var add = new Function('a','b','return a+3');
var sum = add(3,4);</code></pre>
<h3 id="3">Window窗口传值</h3>
<ul>
	<li><strong id="3_1">方式一</strong></li>
</ul>
<pre><code>// 父窗口
window.showModalDialog(url,window当前窗口,params);
window.showModelessDialog(url,window当前窗口,params);
// 子窗口
window.dialogArguments; // 得到父窗口的window对象
// 得到父窗口的window对象可以执行父方法</code></pre>
<ul>
	<li><strong id="3_2">方式二</strong></li>
</ul>
<pre><code>// 父窗口
window.open(url,target,params);
// 子窗口
window.opener; // 得到父窗口的window对象
// 得到父窗口的window对象可以执行父方法</code></pre>
<h3 id="4">DOM编程</h3>
<ul>
	<li><strong id="4_1"><span class="caps">DOM</span> 属性</strong></li>
</ul>
<pre><code>nodeName
    元素节点名称：元素
    文本节点名称：#text
    属性节点名称：name
nodeType       值
    元素节点    1
    属性节点    2
    文本节点    3
nodeValue
    元素节点值：null
    文本节点值：文本内容
    属性节点值：属性值</code></pre>
<ul>
	<li><strong id="4_2"><span class="caps">DOM</span> 属性操作</strong></li>
</ul>
<pre><code>getAttribute();
    Element.getAttribute('value');
setAttribute();
    Element.setAttribute('value', 'abc');</code></pre>
<ul>
	<li><strong id="4_3"><span class="caps">DOM</span> 节点操作</strong></li>
</ul>
<pre><code>// 在target之前插入节点
insertBefore();
    document.insertBefor(new,target);
// 创建节点
createElement();
    document.createElement('input');
// 创建文本节点
createTextNode();
    document.createTextNode('text');
// 添加子节点
appendChild();
    document.appendChild(Element);
// 替换节点
replaceChild();
    document.replaceChild(new, target);
// 删除节点
removeChild();
    document.removeChild(Element);</code></pre>
<h3 id="5">Ajax</h3>
<ul>
	<li><strong id="5_1">创建XMLHttpRequest对象</strong></li>
</ul>
<pre><code>function getXmlHttpRequest(){
    var xmlHttp = null;
    try {
        xmlHttp = new XMLHttpRequest();
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
}
var xhr = getXmlHttpRequest();</code></pre>
<ul>
	<li><strong id="5_2">XMLHttpRequest 属性</strong></li>
</ul>
<pre><code>xhr.onreadystatechange  - 状态监听
xhr.readyState          - 状态
xhr.status              - 响应码
xhr.statusText          - 响应文本
xhr.responseText        - 返回文本内容
xhr.responseXML         - 返回XML内容 MIME=text/xml</code></pre>
<ul>
	<li><strong id="5_3">XMLHttpRequest 方法</strong></li>
</ul>
<pre><code>xhr.open()  - 与服务器建立连接
xhr.send()  - 向服务器发送数据</code></pre>
<ul>
	<li><strong id="5_4">XMLHttpRequest 请求</strong></li>
</ul>
<pre><code>// POST请求
xhr.open("POST", "url", 是否异步：true/false);
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
send(data);</code></pre>
<pre><code>// GET请求
xhr.open("GET", "url", 是否异步：true/false);
send(null);</code></pre>
<ul>
	<li><strong id="5_5">XMLHttpRequest 响应</strong></li>
</ul>
<pre><code>xhr.onreadystatechange = function() {
    if(xhr.readyState == 4 &amp;&amp; xhr.status == 200){
        alert(xhr.responseText);
    }
}</code></pre>
<h3 id="6">Json &#8211; JavaScript Object Notation</h3>
<ul>
	<li><strong id="6_1">Json 对象</strong></li>
</ul>
<pre><code>var user = {
    'username' : 'admin',
    'password' : 'admin'
};
var username    = user.username;</code></pre>
<ul>
	<li><strong id="6_2">Json 数组</strong></li>
</ul>
<pre><code>var users = [
    {'username' : 'admin', 'password' : 'admin'},
    {'username' : 'root', 'password' : 'root'},
    {'username' : 'guest', 'password' : 'guest'}
];
var length      = users.length;
var user        = users[0];
var username    = user.username;</code></pre>
<ul>
	<li><strong id="6_3">Json 复合</strong></li>
</ul>
<pre><code>var users = {
    'address' : [
        {'address' : 'bj'},
        {'address' : 'gz'}
    ],
    'tels' : [
        {'tel' : {'hometel' : '110', 'moblie' : '111'}},
        {'tel' : {'hometel' : '120', 'moblie' : '112'}}
    ]
};
var address = users.address[0].address;
var hometel = users.tels[0].tel.hometel;</code></pre>
<ul>
	<li><strong id="6_4">eval 函数</strong></li>
</ul>
<pre><code>var json = eval('(' + xhr.responseText + ')');
==&gt;
var json = eval("({'username' : 'admin', 'password' : 'admin'})");
var username = json.username;</code></pre>
<ul>
	<li><strong id="6_5">Java &#8594; Json</strong> &#8211; 使用json_lib这个工具包把一个Java对象转换成json串</li>
</ul>
<pre><code>// 转换对象
JSONObject.fromObject(Object).toString();
// 转换数组
JSONArray.fromObject(List&lt;Object&gt;).toString();
// 过滤
JSONArray.fromObject(List&lt;Object&gt;, new JsonConfig().setE(new String[]{"id"})).toString();</code></pre>
			</div>
			
		</div>
	</body>
</html>