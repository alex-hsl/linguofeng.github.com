---
layout: default
title: Android 异步任务
---

h1. {{ page.title }}

p(#1). *AsyncTask 异步任务*

<pre>
===================================================================================================
= 创建
===================================================================================================
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    // 后台任务（子线程）
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
        }
        return totalSize;
    }
    
    // 更新进度（主线程）
    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[ ]);
    }
    
    // 完成（主线程）
    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
 }
</pre>

<pre>
===================================================================================================
= 使用 
===================================================================================================
new DownloadFilesTask().execute(url1, url2, url3);
</pre>

p. 更多参数访问 "http://developer.android.com/reference/android/os/AsyncTask.html":http://developer.android.com/reference/android/os/AsyncTask.html