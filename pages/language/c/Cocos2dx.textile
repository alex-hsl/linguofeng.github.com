---
layout: default
category: Tools
title: Cocos2d-x
description: 开源、跨平台的游戏引擎
---

<section>
    <div class="page-header">
        <h3>一、下载</h3>
    </div>

    <pre>
        http://cocos2d-x.org/projects/cocos2d-x/wiki/Download
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>二、安装 <small>环境：Ubuntu 12.04.1 32bit</small></h3>
    </div>
    
    <pre>
        $ mkdir /path/to/cocos2d-x
        $ mv cocos2d-2.0-rc2-x-2.0.1.zip /path/to/cocos2d-x
        $ cd /path/to/cocos2d-x
        $ unzip cocos2d-2.0-rc2-x-2.0.1.zip
        $ <a href="/pages/tools/SublimeText.html">subl</a> ~/.bashrc
    </pre>
    <pre>
        export COCOS2DX_ROOT=/path/to/cocos2d-x
        export NDK_ROOT=/path/to/android-ndk-r8b    // 需要Android Ndk环境
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>三、HelloWorld <small>需要有Android SDK环境，<a href="#">点击查看</a></small></h3>
    </div>
    
    <pre>
        $ cd $COCOS2DX_ROOT/HelloWorld/proj.android
        $ android update project -p . -t android-10    // 生成Ant需要的build.xml文件
        $ ant debug install                            // 安装到机器上
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>四、Cocds2d-x基础</h3>
    </div>
    <p>主要类介绍</p>
table(table table-bordered).
|_.类|_.说明|_.作用|_.关系|
|@CCDirector@|导演(单例)|负责场景的切换以及场景的信息。如宽度，高度，旋转场景内容。|包含多个 CCScene|
|@CCScene@|场景|场景包含有布景，精灵，每场戏的不同，要切换场景。游戏中可分为主界面， 游戏， 分数榜，结束界面等。|包含多个 CCLayer|
|@CCLayer@|布景|类似是层的概念，也可来源于PS的层的概念。每一层都带有众多精灵等|包含多个 CCSprite|
|@CCSprite@|精灵|就是演员的，演员就需要加入到层里面去的。有相应的动作。|包含多个 CCAction|
|@CCAction@|动作|精灵的动作。||
|@CCMenu@|菜单|||

    <p>场景转换</p>
<pre class="prettyprint">
CCScene* scene = CCScene::node();                                   // 创建scene
CCLayer* layer = CCLayer::node();                                   // 创建layer
scene->addChild(layer);                                             // 添加layer到scene
CCScene* preScene = CCDirector::ShareDirector()->getRunningScene(); // 获取当前正在显示的场景
if (preScene == null) {                                             // 如果当前没有正在显示的场景
    CCDirecotr::ShareDirector()->runWithScene(scene);               // 显示myScene场景
} else {                                                            // 否则
    CCDirecotr::ShareDirector()->replaceScene(scene);               // 替换成myScene场景
}
</pre>

    <h3><small>4.1</small> 动作</h3>

    <p>@CCAction@ ：动作，分为瞬时动作 @CCActionInstanse@ ，延时动作 @CCActionInterval@</p>
<pre class="prettyprint">
CCSize size = CCDirector::sharedDirector()->getWinSize();           // 获取屏幕大小
CCSprite * pSprite = CCSprite::spriteWithFile("HelloWorld.png");    // 创建精灵
CCActionInterval * actionTo = CCMoveTo::actionWithDuration(2, CCPointMake(size.width-40, size.height-40));
pSprite->runAction(actionTo);                                       // 运行动作

CCMoveTo    // 移动
CCMoveBy    // 移动

CCScaleTo   // 缩放
CCScaleBy   // 缩放

CCSkewTo    // 倾斜
CCSkewBy    // 倾斜

CCRotateTo
CCRotateBy

CCJumpTo
CCJumpBy

CCBezierTo
CCBezierBy

Blink

CCFadeIn
CCFadeOut

CCTintTo
CCTintBy

CCAnimate

CCCallFunc
CCCallFuncN
CCCallFuncND
</pre>

    <h3><small>4.2</small> 菜单</h3>

    <p>@CCMenu@ ：菜单，参考： "http://www.cocos2d-x.org/reference/native-cpp/d1/da0/classcocos2d_1_1_c_c_menu.html":http://www.cocos2d-x.org/reference/native-cpp/d1/da0/classcocos2d_1_1_c_c_menu.html</p>
<pre class="prettyprint">
// 创建菜单Item
CCMenuItem* m1 = CCMenuItemFont::itemFromString("新游戏", this, menu_selector(MainLayer::onNewGame));  // menu_selector为全局常量

CCLabelBMFont* label = CCLabelBMFont::labelWithString("Enable AtlasItem", "fonts/bitmapFontTest3.fnt");
CCMenuItem* m2 = CCMenuItemLabel::itemWithLabel(label, this, menu_selector(MainLayer::onNewGame));        // 通过Label创建Item

CCMenuItem* m3 = CCMenuItemAtlasFont    // 通过

CCSprite *spriteNormal   = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*2,115,23));
CCSprite *spriteSelected = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*1,115,23));
CCSprite *spriteDisabled = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*0,115,23));
CCMenuItem* m4 = CCMenuItemSprite::itemFromNormalSprite(spriteNormal, spriteSelected, spriteDisabled, 
                                                        this, 
                                                        menu_selector(MainLayer::onNewGame));

CCMenuItem* m5 = CCMenuItemImage::itemFromNormalImage("image.png", "imagep.png", this, menu_selector(MainLayer::onNewGame) );

CCMenuItem* m6 = CCMenuItemToggle::itemWithTarget(this, menu_selector(MainLayer::onNewGame), 
                                                        CCMenuItemFont::itemFromString("High"),
                                                        CCMenuItemFont::itemFromString("Low"),
                                                        ...,
                                                        NULL);
m6->getSubItems()->addObject(CCMenuItemFont::itemFromString("33%"));
m6->setSelectedIndex(2);

// 添加菜单Item到菜单中
CCMenu* menu = CCMenu::menuWithItems(m1, m2, m3, m4, m5, m6, NULL); // 最后必须加NULL

void MainLayer::onNewGame(CCObject* pSender) {
    // 回调
}
</pre>

    <h3><small>4.3</small> 多层</h3>

    <p>@CCLayerMultiplex@ :多个层，参考： "http://www.cocos2d-x.org/reference/native-cpp/d3/d7e/classcocos2d_1_1_c_c_layer_multiplex.html":http://www.cocos2d-x.org/reference/native-cpp/d3/d7e/classcocos2d_1_1_c_c_layer_multiplex.html</p>
<pre class="prettyprint">
CCLayer* pLayer1 = new MenuLayer1();
CCLayer* pLayer2 = new MenuLayer2();
CCLayer* pLayer3 = new MenuLayer3();
CCLayer* pLayer4 = new MenuLayer4();

CCLayerMultiplex* layer = CCLayerMultiplex::layerWithLayers(pLayer1, pLayer2, pLayer3, pLayer4, NULL);
addChild(layer, 0); 

pLayer1->release();
pLayer2->release();
pLayer3->release();
pLayer4->release();

CCDirector::sharedDirector()->replaceScene(this);

// 切换
((CCLayerMultiplex*)m_pParent)->switchTo(0);
</pre>

    <h3><small>4.4</small> 进度条</h3>

    <p>@CCProgressTimer@ ：进度条</p>

table(table table-bordered).
|_.type|_.说明|
|@kCCProgressTimerTypeRadialCCW@|径向逆时针旋转|
|@kCCProgressTimerTypeRadialCW@|径向顺时针旋转|
|@kCCProgressTimerTypeHorizontalBarLR@|水平从左往右|
|@kCCProgressTimerTypeHorizontalBarRL@|水平从右往左|
|@kCCProgressTimerTypeVerticalBarBT@|垂直从下往上|
|@kCCProgressTimerTypeVerticalBarTB@|垂直从上往下|

<pre class="prettyprint">
CCProgressTimer * pt = CCProgressTimer::progressWithFile("image.png");
pt->setType(kCCProgressTimerTypeRadialCCW);
pt->setType(kCCProgressTimerTypeRadialCW);
pt->setType(kCCProgressTimerTypeHorizontalBarLR);
pt->setType(kCCProgressTimerTypeHorizontalBarRL);
pt->setType(kCCProgressTimerTypeVerticalBarBT);
pt->setType(kCCProgressTimerTypeVerticalBarTB);
CCProgressTo * to = CCProgressTo::actionWithDuration(2, 100);    // 时间，百分比
pt->runAction(CCRepeatForever::actionWithAction(to));
</pre>

    <h3><small>4.5</small> 场景转换</h3>

    <p>@CCTransitionScene@ ：场景转换效果</p>
table(table table-bordered).
|_.效果|_.说明|_.方法|_.参数|
|@CCTransitionFade@|以颜色淡出淡入|@transitionWithDuration(时间, 场景, ccBLACK)@|@ccc3(255,0,0)@ ：三原色|
|@CCTransitionFlipX@|水平翻转屏幕|@transitionWithDuration(时间, 场景, kOrientationRightOver)@|@kOrientationLeftOver@ ：从左往右 <br>@kOrientationRightOver@ ：从右往左|
|@CCTransitionFlipY@|垂直翻转屏幕|@transitionWithDuration(时间, 场景, kOrientationUpOver)@|@kOrientationUpOver@ ：从上往下 <br>@kOrientationDownOver@ ：从下往上|
|@CCTransitionFlipAngular@|角度翻转屏幕|@transitionWithDuration(时间, 场景, kOrientationRightOver)@|@kOrientationLeftOver@ ：从左下角往上 <br>@kOrientationRightOver@ ：从右上角往下|
|@CCTransitionZoomFlipX@|水平翻转并缩小/放大|@transitionWithDuration(时间, 场景, kOrientationRightOver)@|@kOrientationLeftOver@ ：从左(放大)往右 <br>@kOrientationRightOver@ ：从右(放大)往左|
|@CCTransitionZoomFlipY@|垂直翻转并缩小/放大|@transitionWithDuration(时间, 场景, kOrientationUpOver)@|@kOrientationUpOver@ ：从上(放大)往下 <br>@kOrientationDownOver@ ：从下(放大)往上|
|@CCTransitionZoomFlipAngular@|角度翻转并缩小/放大|@transitionWithDuration(时间, 场景, kOrientationRightOver)@|@kOrientationLeftOver@ ：从左下角(放大)往上 <br>@kOrientationRightOver@ ：从右上角(放大)往下|
|@CCTransitionShrinkGrow@|收缩出放大入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionRotoZoom@|转收缩出转放大入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionMoveInL@|从左移动入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionMoveInR@|从右移动入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionMoveInT@|从上移动入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionMoveInB@|从下移动入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSlideInL@|从左平滑移入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSlideInR@|从右平滑移入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSlideInT@|从上平滑移入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSlideInB@|从下平滑移入|@transitionWithDuration(时间, 场景)@||
|@CCTransitionCrossFade@|交叉淡入两个场景|@transitionWithDuration(时间, 场景)@||
|@CCTransitionPageTurn@|翻页|@transitionWithDuration(时间, 场景, 参数)@|@true@ ：合上 <br>@false@ ：翻开|
|@CCTransitionFadeTR@|往右上角马赛克退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionFadeBL@|往左下角马赛克退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionFadeUp@|往上角马赛克退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionFadeDown@|往下角马赛克退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionTurnOffTiles@|随机马赛克退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSplitRows@|基数行左，偶数行右退出|@transitionWithDuration(时间, 场景)@||
|@CCTransitionSplitCols@|基数行上，偶数行下退出|@transitionWithDuration(时间, 场景)@||

<pre class="prettyprint">
CCTransitionFade * tfScene = CCTransitionFade::transitionWithDuration(2, new CCScene(), ccBLACK);
if (tfScene) {
    CCDirector::sharedDirector()->replaceScene(pScene);
}
</pre>

    <h3><small>4.6</small> 效果</h3>
table(table table-bordered).
|_.类|_.说明|_.静态函数|
|@CCShaky3D@|摇动的3D|@CCShaky3D::actionWithRange(5, true, ccg(15,10), t)@ // 范围 是否摇动 网格大小 时间|
|@CCWaves3D@|波浪3D|@CCWaves3D::actionWithWaves(5, 40, ccg(15,10), t)@|
|@CCFlipX3D@|水平翻转3D|@CCFlipX3D::actionWithDuration(t)@|
|@CCFlipY3D@|垂直翻转3D|@CCFlipY3D::actionWithDuration(t)@|
|@CCLens3D@|镜面3D|@CCLens3D::actionWithPosition(CCPointMake(size.width/2,size.height/2), 240, ccg(15,10), t)@|
|@CCRipple3D@|波纹3D|@CCRipple3D::actionWithPosition(CCPointMake(size.width/2,size.height/2), 240, 4, 160, ccg(32,24), t)@|
|@CCLiquid@|液体效果|@CCLiquid::actionWithWaves(4, 20, ccg(16,12), t)@|
|@CCWaves@|波浪效果|@CCWaves::actionWithWaves(4, 20, true, true, ccg(16,12), t)@|
|@CCTwirl@|晃动效果|@CCTwirl::actionWithPosition(CCPointMake(size.width/2, size.height/2), 1, 2.5f, ccg(12,8), t)@|
|@CCShakyTiles3D@|摇动马赛克|@CCShakyTiles3D::actionWithRange(5, true, ccg(16,12), t)@|
|@CCShatteredTiles3D@|破碎马赛克|@CCShatteredTiles3D::actionWithRange(5, true, ccg(16,12), t)@|
|@CCShuffleTiles@|随机马赛克|@CCShuffleTiles::actionWithSeed(25, ccg(16,12), t)@|
|@CCFadeOutTRTiles@|往右上角马赛克淡出|@CCFadeOutTRTiles::actionWithSize(ccg(16,12), t)@|
|@CCFadeOutBLTiles@|往左下角马赛克淡出|@CCFadeOutBLTiles::actionWithSize(ccg(16,12), t)@|
|@CCFadeOutUpTiles@|往上马赛克淡出|@CCFadeOutUpTiles::actionWithSize(ccg(16,12), t)@|
|@CCFadeOutDownTiles@|往下马赛克淡出|@CCFadeOutDownTiles::actionWithSize(ccg(16,12), t)@|
|@CCTurnOffTiles@|马赛克随机消失|@CCTurnOffTiles::actionWithSeed(25, ccg(48,32) , t)@|
|@CCWavesTiles3D@|波浪马赛克|@CCWavesTiles3D::actionWithWaves(4, 120, ccg(15,10), t)@|
|@CCJumpTiles3D@|跳动的3D马赛克|@CCJumpTiles3D::actionWithJumps(2, 30, ccg(15,10), t)@|
|@CCSplitRows@|基数往左，偶数往下|@CCSplitRows::actionWithRows(9, t)@|
|@CCSplitCols@|基数往上，偶数往下|@CCSplitCols::actionWithCols(9, t)@|
|@CCPageTurn3D@|3D翻页效果|@CCPageTurn3D::actionWithSize(ccg(15,10), t)@|

    <h3><small>4.7</small> 节点</h3>
    <p>@CCOrbitCamera@ ：轨道摄影机</p>
<pre class="prettyprint">
CCOrbitCamera::actionWithDuration(10, 1, 0, 0, 360, 0, 0);  // 时间，起始半径，半径差，起始z角，旋转z角差，起始x角，旋转x角差
</pre>
</section>