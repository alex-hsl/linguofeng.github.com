---
layout: default
category: Tools
title: Cocos2d-x
description: 开源、跨平台的游戏引擎
---

<section>
    <div class="page-header">
        <h3>一、下载</h3>
    </div>

    <pre>
        http://cocos2d-x.org/projects/cocos2d-x/wiki/Download
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>二、安装 <small>环境：Ubuntu 12.04.1 32bit</small></h3>
    </div>
    
    <pre>
        $ mkdir /path/to/cocos2d-x
        $ mv cocos2d-2.0-rc2-x-2.0.1.zip /path/to/cocos2d-x
        $ cd /path/to/cocos2d-x
        $ unzip cocos2d-2.0-rc2-x-2.0.1.zip
        $ <a href="/pages/tools/SublimeText.html">subl</a> ~/.bashrc
    </pre>
    <pre>
        export COCOS2DX_ROOT=/path/to/cocos2d-x
        export NDK_ROOT=/path/to/android-ndk-r8b    // 需要Android Ndk环境
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>三、HelloWorld <small>需要有Android SDK环境，<a href="#">点击查看</a></small></h3>
    </div>
    
    <pre>
        $ cd $COCOS2DX_ROOT/HelloWorld/proj.android
        $ android update project -p . -t android-10    // 生成Ant需要的build.xml文件
        $ ant debug install                            // 安装到机器上
    </pre>
</section>

<section>
    <div class="page-header">
        <h3>四、Cocds2d-x基础</h3>
    </div>
    <p>主要类介绍</p>
table(table table-bordered).
|_.类|_.说明|_.作用|_.关系|
|@CCDirector@|导演(单例)|负责场景的切换以及场景的信息。如宽度，高度，旋转场景内容。|包含多个 CCScene|
|@CCScene@|场景|场景包含有布景，精灵，每场戏的不同，要切换场景。游戏中可分为主界面， 游戏， 分数榜，结束界面等。|包含多个 CCLayer|
|@CCLayer@|布景|类似是层的概念，也可来源于PS的层的概念。每一层都带有众多精灵等|包含多个 CCSprite|
|@CCSprite@|精灵|就是演员的，演员就需要加入到层里面去的。有相应的动作。|包含多个 CCAction|
|@CCAction@|动作|精灵的动作。||
|@CCMenu@|菜单|||

    <p>场景转换</p>
<pre class="prettyprint">
CCScene* scene = CCScene::node();                                   // 创建scene
CCLayer* layer = CCLayer::node();                                   // 创建layer
scene->addChild(layer);                                             // 添加layer到scene
CCScene* preScene = CCDirector::ShareDirector()->getRunningScene(); // 获取当前正在显示的场景
if (preScene == null) {                                             // 如果当前没有正在显示的场景
    CCDirecotr::ShareDirector()->runWithScene(scene);               // 显示myScene场景
} else {                                                            // 否则
    CCDirecotr::ShareDirector()->replaceScene(scene);               // 替换成myScene场景
}
</pre>

    <p>@CCAction@ ：动作，分为瞬时动作 @CCActionInstanse@ ，延时动作 @CCActionInterval@</p>
<pre class="prettyprint">
CCSize size = CCDirector::sharedDirector()->getWinSize();           // 获取屏幕大小
CCSprite * pSprite = CCSprite::spriteWithFile("HelloWorld.png");    // 创建精灵
CCActionInterval * actionTo = CCMoveTo::actionWithDuration(2, CCPointMake(size.width-40, size.height-40));
pSprite->runAction(actionTo);                                       // 运行动作
</pre>

    <p>@CCMenu@ ：菜单，参考： "http://www.cocos2d-x.org/reference/native-cpp/d1/da0/classcocos2d_1_1_c_c_menu.html":http://www.cocos2d-x.org/reference/native-cpp/d1/da0/classcocos2d_1_1_c_c_menu.html</p>
<pre class="prettyprint">
// 创建菜单Item
CCMenuItem* m1 = CCMenuItemFont::itemFromString("新游戏", this, menu_selector(MainLayer::onNewGame));  // menu_selector为全局常量

CCLabelBMFont* label = CCLabelBMFont::labelWithString("Enable AtlasItem", "fonts/bitmapFontTest3.fnt");
CCMenuItem* m2 = CCMenuItemLabel::itemWithLabel(label, this, menu_selector(MainLayer::onNewGame));        // 通过Label创建Item

CCMenuItem* m3 = CCMenuItemAtlasFont    // 通过

CCSprite *spriteNormal   = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*2,115,23));
CCSprite *spriteSelected = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*1,115,23));
CCSprite *spriteDisabled = CCSprite::spriteWithFile("image.png",  CCRectMake(0,23*0,115,23));
CCMenuItem* m4 = CCMenuItemSprite::itemFromNormalSprite(spriteNormal, spriteSelected, spriteDisabled, 
                                                        this, 
                                                        menu_selector(MainLayer::onNewGame));

CCMenuItem* m5 = CCMenuItemImage::itemFromNormalImage("image.png", "imagep.png", this, menu_selector(MainLayer::onNewGame) );

CCMenuItem* m6 = CCMenuItemToggle::itemWithTarget(this, menu_selector(MainLayer::onNewGame), 
                                                        CCMenuItemFont::itemFromString("High"),
                                                        CCMenuItemFont::itemFromString("Low"),
                                                        ...,
                                                        NULL);
m6->getSubItems()->addObject(CCMenuItemFont::itemFromString("33%"));
m6->setSelectedIndex(2);

// 添加菜单Item到菜单中
CCMenu* menu = CCMenu::menuWithItems(m1, m2, m3, m4, m5, m6, NULL); // 最后必须加NULL

void MainLayer::onNewGame(CCObject* pSender) {
    // 回调
}
</pre>

    <p>@CCLayerMultiplex@ :多个层，参考： "http://www.cocos2d-x.org/reference/native-cpp/d3/d7e/classcocos2d_1_1_c_c_layer_multiplex.html":http://www.cocos2d-x.org/reference/native-cpp/d3/d7e/classcocos2d_1_1_c_c_layer_multiplex.html</p>
<pre class="prettyprint">
CCLayer* pLayer1 = new MenuLayer1();
CCLayer* pLayer2 = new MenuLayer2();
CCLayer* pLayer3 = new MenuLayer3();
CCLayer* pLayer4 = new MenuLayer4();

CCLayerMultiplex* layer = CCLayerMultiplex::layerWithLayers(pLayer1, pLayer2, pLayer3, pLayer4, NULL);
addChild(layer, 0); 

pLayer1->release();
pLayer2->release();
pLayer3->release();
pLayer4->release();

CCDirector::sharedDirector()->replaceScene(this);

// 切换
((CCLayerMultiplex*)m_pParent)->switchTo(0);
</pre>

    <p>@CCAction@ ：动作</p>
<pre class="prettyprint">
CCMoveTo    // 移动
CCMoveBy    // 移动

CCScaleTo   // 缩放
CCScaleBy   // 缩放

CCSkewTo    // 倾斜
CCSkewBy    // 倾斜

CCRotateTo
CCRotateBy

CCJumpTo
CCJumpBy

CCBezierTo
CCBezierBy

Blink

CCFadeIn
CCFadeOut

CCTintTo
CCTintBy

CCAnimate

CCCallFunc
CCCallFuncN
CCCallFuncND
</pre>
</section>